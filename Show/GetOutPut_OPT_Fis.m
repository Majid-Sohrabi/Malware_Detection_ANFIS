clc;
clear all;
close all;

addpath('./.');
addpath('./..');
addpath('.\Result');
addpath('./Data/');

load('_Data');

Inputs = Data(:,1:7);
Targets = Data(:,8);

nSample = size(Inputs,1);

% Train Data
pTrain = .7;
nTrain = round(pTrain*nSample); 
TrainInputs = Inputs(1:nTrain,:);
TrainTargets = Targets(1:nTrain,:);

% Test Data
TestInputs = Inputs(nTrain+1:end,:);
TestTargets = Targets(nTrain+1:end,:);

%% Extract Result
Index=5;
if Index==1
    % GA
    load('_Output_GA.mat');
    OutPut_GA = evalfis(TestInputs,Fis);

elseif Index==2
    % PSO
    load('_Output_PSO.mat');
    OutPut_PSO = evalfis(TestInputs,Fis);
    
elseif Index==3
    % ICA
    load('_Output_ICA.mat');
%     load('_Fis')
%     Fis=Fis_SetParameters(Fis,Result.BestSol.Position.*Fis_GetParameters(Fis));
    OutPut_ICA = evalfis(TestInputs,Fis);

elseif Index==4
    % TLBO
    load('_Output_TLBO.mat');
    OutPut_TLBO = evalfis(TestInputs,Fis);
    
elseif Index==5
    % WOA
    load('_Output_WOA.mat');
%      load('_Fis')
%     Fis=Fis_SetParameters(Fis,Result.BestSol.Position.*Fis_GetParameters(Fis));
    OutPut_WOA = evalfis(TestInputs,Fis);
    
elseif Index==6
    % DE
    load('_Output_DE.mat');
    OutPut_DE = evalfis(TestInputs,Fis);
    
elseif Index==7
    % ACOR
    load('_Output_ACOR.mat');
    OutPut_ACOR = evalfis(TestInputs,Fis);
end
%% Result

Errors=TestTargets-OutPut_WOA;
subplot(2,2,[1 2]);
plot(TestTargets,'r:');
hold on;
plot(OutPut_WOA,'b');
legend('Targets','Outputs');
% title([Name ' - Targets and Outputs']);
ylabel('Targets and Outputs');

ErrorMean=mean(Errors);
ErrorStD=std(Errors);
MSE=mean(Errors.^2);
RMSE=sqrt(MSE);

subplot(2,2,3);
plot(Errors);
ylabel('Errors');
title(['MSE = ' num2str(MSE) ', RMSE = ' num2str(RMSE)]);

nBin=max(round(numel(Errors)/20),10);

subplot(2,2,4);
histfit(Errors,nBin);
xlabel('Errors');
title(['Mean = ' num2str(ErrorMean) ', StD = ' num2str(ErrorStD)]);
